---
import EssayLayout from "../layouts/EssayLayout.astro";

/**
 * Grab all MDX pages except index.mdx and test.mdx
 */
const pages = import.meta.glob("./*.mdx", { eager: true });

const posts = Object.entries(pages)
  .filter(([path]) => !path.includes("test.mdx"))
  .map(([path, mod]) => {
    const slug = path.replace("./", "").replace(".mdx", "");
    return {
      slug,
      title: mod.frontmatter?.title ?? slug,
    };
  });
---

<EssayLayout>
<div class="home-banner">
  <img
    src="/omw.png"
    alt="Old Man’s Words — fantasy and science fiction reflections"
  />
</div>

<p>
  My SF&F blog. (intro coming)
</p>

<h2>Recent posts</h2>

<ul>
  {posts.map(post => (
    <li>
      <a href={`/${post.slug}`}>{post.title}</a>
    </li>
  ))}
</ul>

</EssayLayout>
